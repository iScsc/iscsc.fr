FROM nginx:1.23.2

ARG FLASK_RUN_PORT
ENV FLASK_RUN_PORT=$FLASK_RUN_PORT

ARG REACT_PORT
ENV REACT_PORT=$REACT_PORT

ARG SERVER_NAME
ENV SERVER_NAME=$SERVER_NAME

ARG MODE
ENV MODE=$MODE

WORKDIR /nginx
COPY . .
CMD MODE=$MODE ./run_nginx.sh
EXPOSE 80
